<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>


    <script
            src="https://code.jquery.com/jquery-3.4.1.js"
            integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
            crossorigin="anonymous"></script>
</head>
<body>

<p id="tableData">

</p>

<script>

    var txt= 'text';
    function getData(callback) {
        // new Promise() 추가
        return new Promise(function (resolve, reject) {
            var url = 'https://opentdb.com/api.php?amount=10&category=27&type=multiple';

            // url= 'https://opentdb.com/api.php?amount=1' ;
            url= 'https://raw.githubusercontent.com/joshua1988/doit-vuejs/master/data/demo.json' ;

            /*
            $.get(url, function (response) {
                // 데이터를 받으면 resolve() 호출
                console.log(response);
                if(response) {
                    resolve(response);
                }
                reject(new Error("Request is failed"));
            });
             */
            $.ajax({
                url: url
            }).done(function(result , isSuccess, resultCode ){
         // }).done(function(data, textStatus, jqXHR ){
                console.log(result, isSuccess, resultCode);

            });

            console.log("step 1 : " + txt);
        });
    }

    $(function(){
        // getData()의 실행이 끝나면 호출되는 then()
        getData().then(function (tableData) {
            // resolve()의 결과 값이 여기로 전달됨
            console.log("step 2 : " + tableData); // $.get()의 reponse 값이 tableData에 전달됨
            txt = tableData;

            console.log("step 3 : " + txt); // $.get()의 reponse 값이 tableData에 전달됨


            $("#tableData").text(tableData.results);
        }).catch(function (err) {
            console.log(err); // Error: Request is failed
        });
        // console.log(txt);
    });

</script>



</body>
</html>